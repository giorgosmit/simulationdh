<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
<title>DH2016tutorial</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<!-- Custom stylesheet, it must be in the same directory as the html file -->
<link rel="stylesheet" href="custom.css">

<!-- Loading mathjax macro -->
<!-- Load mathjax -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --></head>
<body>
  <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Introduction-to-Simulation:-Complex-social-dynamics-in-a-few-lines-of-code">Introduction to Simulation: Complex social dynamics in a few lines of code<a class="anchor-link" href="#Introduction-to-Simulation:-Complex-social-dynamics-in-a-few-lines-of-code">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We will create a model depicting competition between two cultural traits within a common population. This is a typical cultural dynamics scenario where individuals must adopt one option amongst two or more <strong>mutually exclusive</strong> options (i.e. religion, elections, football teams, ...). In this case we are interested in situations when you have to choose one option (e.g., you cannot practice two religions), but more complex versions with individuals adopting more than one trait can easily be developed.</p>
<p>Individuals can change their choice over time. The decision is based on the payoff of each trait. This payoff is a measure of the relative interest of the trait, based on:</p>
<p>a) how many people exhibits the trait and</p>
<p>b) the attractiveness of the trait.</p>
<p>An example of this dynamic could be a competition between two different religions. The number of people practicing a belief makes this belief more appealing. However, some beliefs could be intrinsically more interesting for some individuals so part of the population could adopt them even if they are a minority. Finally, social norms are not static so the attractiveness of specific beliefs can vary over time.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="diagram.png" alt="general overview of the model"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Time is divided in discrete steps starting at t = 0.</p>
<p>At each step t the two populations $A_t$ and $B_t$ are updated as individuals move from A to B and from B to A. Take intoa ccout that the value here can be negative meaning that more people move from B to A.</p>
\begin{equation*}
A_{t+1} = A_t + \Delta AB
\end{equation*}\begin{equation*}
B_{t+1} = B_t - \Delta AB
\end{equation*}<p></p>
<p>Let's see how we can express it in code.</p>
<!--XRC: no needed because they all use python 3.2
We start with an auxiliary line of code which prevents truncation when dividing integers. You don't have to worry about it now but just keep in mind to start any code written in Python 2.7 or earlier with this line. If you have installed Python 3.2 or higher you can skip this line.
from __future__ import division
-->
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First, we need to define the number of individuals in the population. Say we want to start with 100 people. The text after a hash symbol is just a comment so you can skip it for now, but in general it is a good idea to keep documenting the code as you write.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">N</span> <span class="o">=</span> <span class="mi">100</span>   <span class="c"># total population size</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then, we decide on how many believers of each cultural option (religion) we want to start with.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">A</span> <span class="o">=</span> <span class="mi">65</span>    <span class="c"># initial number of believers A</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">N</span> <span class="o">-</span> <span class="n">A</span> <span class="c"># initial number of believers A</span>
</pre></div>

</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, we want to update these quantities at every time step depending on some variation:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">MAX_TIME</span> <span class="o">=</span> <span class="mi">100</span>
<span class="k">while</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="n">MAX_TIME</span><span class="p">:</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">A</span> <span class="o">+</span> <span class="n">variation</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">B</span> <span class="o">-</span> <span class="n">variation</span>
    
    <span class="c"># advance time to next iteration</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="mi">1</span>    
</pre></div>

</div>
</div>
</div>


<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Type the code in the code tab. Keep in mind that indents are important.</p>
<p>Run the code by hitting F5 (or click on a green triangle). What happens?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Well, nothing happens or, rather, we get an error.</p>
<div class="highlight"><pre><span class="ne">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="n">variation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>
</pre></div>
<p>Indeed, we have not defined what do we mean by 'variation'. So let's calculate it based on the population switching trait based on a comparison between payoffs. For example if B has higher payoff then A then we should get something like this:</p>

<p>
\begin{equation*}
\Delta_{A\to B} = A Â· (payoff_{A\to B} - payoff_{B\to A})
\end{equation*}
</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So the proportion of population A that switches to B is proportional to the difference between payoffs. As we mentioned the payoff of a trait is determined by the population exhibiting the competing trait as well as its intrinsic attractiveness.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To define the payoff we need to implement the following competition equations:</p>
<p>
\begin{equation*}
payoff_{B\to A} = \frac{A_t}{N}\ \frac {T_A} {(T_A + T_B)}\
\end{equation*}
<br>
\begin{equation*}
payoff_{A\to B} = \frac{B_t}{N}\ \frac {T_B} {(T_A + T_B)}\
\end{equation*}
</p>
<p>Let's look at the equations a bit more closely. The first term is the proportion of the entire population N holding a particular cultural trait ($\frac {A_t}{N}$ for $A$ and $\frac {B_t}{N}$ for $B$). While the second element of the equations is the balance between the attractiveness of both ideas ($T_A$ and $T_B$) expressed as the attractiveness of the given trait in respect to the total 'available' attractiveness ($T_A + T_B$).</p>
<p>You have probably immediately noticed that these two equations are the same in structure and only differ in terms of what is put into them. Therefore, to avoid unnecessary hassle we will create a 'universal' function that can be used for both. Type the code below at the beginning of your script:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="k">def</span> <span class="nf">payoff</span><span class="p">(</span><span class="n">believers</span><span class="p">,</span> <span class="n">Tx</span><span class="p">,</span><span class="n">Ty</span><span class="p">):</span>    
    <span class="n">proportionBelievers</span> <span class="o">=</span> <span class="n">believers</span><span class="o">/</span><span class="n">N</span>
    <span class="n">attraction</span> <span class="o">=</span> <span class="n">Tx</span><span class="o">/</span><span class="p">(</span><span class="n">Ty</span> <span class="o">+</span> <span class="n">Tx</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">proportionBelievers</span> <span class="o">*</span> <span class="n">attraction</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's break it down a little. First we define the function and give it the input - the number of believers and the two values that define how attractive each cultural option is.</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">payoff</span><span class="p">(</span><span class="n">believers</span><span class="p">,</span> <span class="n">Tx</span><span class="p">,</span> <span class="n">Ty</span><span class="p">):</span>
</pre></div>
<p>Then we calculate two values:</p>
<ol>
<li>percentage of population sharing this cultural option<div class="highlight"><pre><span class="n">proportionBelievers</span> <span class="o">=</span> <span class="n">believers</span><span class="o">/</span><span class="n">N</span>
</pre></div>
</li>
<li>how attractive the option is<div class="highlight"><pre><span class="n">attraction</span> <span class="o">=</span> <span class="n">Tx</span><span class="o">/</span><span class="p">(</span><span class="n">Ty</span> <span class="o">+</span> <span class="n">Tx</span><span class="p">)</span>
</pre></div>
</li>
</ol>
<p>Look at the equations above, the first element is just the $\frac {A_t}{N}$ and $\frac {B_t}{N}$ part and the second is this bit: $\frac {T_A} {(T_A + T_B)}$. 
Finally we return the results of the calculations.</p>
<div class="highlight"><pre><span class="k">return</span> <span class="n">proportionBelievers</span> <span class="o">*</span> <span class="n">attraction</span>
</pre></div>
<p>Voila! We have implemented the equation into Python code. Now, let's modify the main loop to call the function - we need to do it twice to get the payoff for changing from A to B and from B to A. This is repeated during each iteration of the loop, so each time we can pass different values into it. To get the payoffs for switching from A to B and from B to A we have to add the calls to 'payoff' at the beginning of our loop:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="k">while</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="n">MAX_TIME</span><span class="p">:</span>
    
    <span class="n">variationBA</span> <span class="o">=</span> <span class="n">payoff</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span><span class="p">)</span>
    <span class="n">variationAB</span> <span class="o">=</span> <span class="n">payoff</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">Tb</span><span class="p">,</span> <span class="n">Ta</span><span class="p">)</span>
    
    <span class="n">A</span> <span class="o">=</span> <span class="n">A</span> <span class="o">+</span> <span class="n">variation</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">B</span> <span class="o">-</span> <span class="n">variation</span>
    
    <span class="c"># advance time to next iteration</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="mi">1</span>    
</pre></div>

</div>
</div>
</div>


<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That is, we pass the number of believers and the attractiveness of the traits. The order in which we pass the input variables into a function is important. In the B to A transmission, B becomes 'believers', while Ta becomes 'Tx' and Tb becomes 'Ty'. In the second line showing the A to B transmission, A becomes '_believers', Tb becomes 'Tx' and Ta becomes 'Ty'.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The obvious problem after this change is that we have not defined the 'attractiveness' of each trait. To do so add their definitions at the beginning of the script around other definitions (N, A, B, MAX_TIME, etc).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">Ta</span> <span class="o">=</span> <span class="mf">1.0</span>            <span class="c"># initial attractiveness of option A</span>
<span class="n">Tb</span> <span class="o">=</span> <span class="mf">2.0</span>            <span class="c"># initial attractiveness of option B</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.1</span>         <span class="c"># strength of the transmission process</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can now calculate the difference between the perceived payoffs during this time step. To do so, we need to first see which one did better (A or B).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre>    <span class="n">difference</span> <span class="o">=</span> <span class="n">variationBA</span> <span class="o">-</span> <span class="n">variationAB</span>
</pre></div>

</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now, if the difference between the two is negative then we know that during time step B is more interesting than A. On the contrary, if it is positive then A seems better than B. What is left is to see how many people moved based on this difference between payoffs. We can express it in the main while loop, like this:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre>    <span class="c"># B -&gt; A</span>
    <span class="k">if</span> <span class="n">difference</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">variation</span> <span class="o">=</span> <span class="n">difference</span><span class="o">*</span><span class="n">B</span>
    <span class="c"># A -&gt; B        </span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">variation</span> <span class="o">=</span> <span class="n">difference</span><span class="o">*</span><span class="n">A</span>
    <span class="c"># update the population    </span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">A</span> <span class="o">+</span> <span class="n">variation</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">B</span> <span class="o">-</span> <span class="n">variation</span>    
</pre></div>

</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can use an additional term to have a control over how strong the transmission from A to B and back is - we will call it alpha (Î±). This parameter will multiply change before we modify populations A and B:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre>    <span class="n">variation</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">*</span><span class="n">variation</span>
</pre></div>

</div>
</div>
</div>


<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And we need to add it to the rest of the parameters of our model:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># temporal dimension</span>
<span class="n">MAX_TIME</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>               <span class="c"># initial time</span>

<span class="c"># init populations</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">100</span>          <span class="c"># population size</span>
<span class="n">A</span> <span class="o">=</span> <span class="mi">65</span>           <span class="c"># initial population of believers A</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">N</span><span class="o">-</span><span class="n">A</span>             <span class="c"># initial population of believers B</span>

<span class="c"># additional params</span>
<span class="n">Ta</span> <span class="o">=</span> <span class="mf">1.0</span>            <span class="c"># initial attractiveness of option A</span>
<span class="n">Tb</span> <span class="o">=</span> <span class="mf">2.0</span>            <span class="c"># initial attractiveness of option B</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.1</span>         <span class="c"># strength of the transmission process</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You should bear in mind that the main loop code should be located after the definition of the transmission function and the initialization of variables (because they are used here). After all the edits you have done it should look like this:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="k">while</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="n">MAX_TIME</span><span class="p">:</span>
    <span class="c"># calculate the payoff for change of believers A and B in the current time step       </span>
    <span class="n">variationBA</span> <span class="o">=</span> <span class="n">payoff</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span><span class="p">)</span>      
    <span class="n">variationAB</span> <span class="o">=</span> <span class="n">payoff</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">Tb</span><span class="p">,</span> <span class="n">Ta</span><span class="p">)</span>     
    <span class="n">difference</span> <span class="o">=</span> <span class="n">variationBA</span> <span class="o">-</span> <span class="n">variationAB</span>
             
    <span class="c"># B -&gt; A   </span>
    <span class="k">if</span> <span class="n">difference</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">variation</span> <span class="o">=</span> <span class="n">difference</span><span class="o">*</span><span class="n">B</span>
    <span class="c"># A -&gt; B        </span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">variation</span> <span class="o">=</span> <span class="n">difference</span><span class="o">*</span><span class="n">A</span>
        
    <span class="c"># control the pace of change with alpha</span>
    <span class="n">variation</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">*</span><span class="n">variation</span>  
    
    <span class="c"># update the population    </span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">A</span> <span class="o">+</span> <span class="n">variation</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">B</span> <span class="o">-</span> <span class="n">variation</span>
    
    <span class="c"># advance time to next iteration</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>OK, we have all the elements ready now and if you run the code the computer will churn all the numbers somewhere in the background. However, it produces no output so we have no idea what is actually happening. Let's solve this by visualising the flow of believers from one option to another. 
First, we will create two empty lists. Second, we will add there the initial populations. Then, at each timestep, we will add the current number of believers to these lists and finally, at the end of the simulation run we will plot them to see how they changed over time. 
Start with creating two empty lists. Add the following code right after all the variable definitions at the beginning of the code before the while loop:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># initialise the list used for plotting</span>
<span class="n">believersA</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">believersB</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c"># add the initial populations</span>
<span class="n">believersA</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> 
<span class="n">believersB</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The whole initialisation/definition block at the beginning of your code should look like this:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># initialisation </span>
<span class="n">MAX_TIME</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>               <span class="c"># initial time</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">100</span>           <span class="c"># population size</span>
<span class="n">A</span> <span class="o">=</span> <span class="mi">65</span>              <span class="c"># initial proportion of believers A</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">N</span><span class="o">-</span><span class="n">A</span>             <span class="c"># initial proportion of believers B</span>

<span class="n">Ta</span> <span class="o">=</span> <span class="mf">1.0</span>            <span class="c"># initial attractiveness of option A</span>
<span class="n">Tb</span> <span class="o">=</span> <span class="mf">2.0</span>            <span class="c"># initial attractiveness of option B</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.1</span>         <span class="c"># strength of the transmission process</span>

<span class="c"># initialise the list used for plotting</span>
<span class="n">believersA</span> <span class="o">=</span> <span class="p">[]</span>    
<span class="n">believersB</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c"># add the initial populations</span>
<span class="n">believersA</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> 
<span class="n">believersB</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We just added the initial number of believers to their respective lists. However, we also need to do this at the end of each time step. Add the following code at the end of the while loop - remember to align the indents with the previous line!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre>    <span class="n">believersA</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="n">believersB</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The whole while-loop block should now look like this:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="k">while</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="n">MAX_TIME</span><span class="p">:</span> 
    <span class="c"># calculate the payoff for change of believers A and B in the current time step       </span>
    <span class="n">variationBA</span> <span class="o">=</span> <span class="n">payoff</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span><span class="p">)</span>      
    <span class="n">variationAB</span> <span class="o">=</span> <span class="n">payoff</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">Tb</span><span class="p">,</span> <span class="n">Ta</span><span class="p">)</span>     
    <span class="n">difference</span> <span class="o">=</span> <span class="n">variationBA</span> <span class="o">-</span> <span class="n">variationAB</span>
    
        <span class="c"># B -&gt; A   </span>
    <span class="k">if</span> <span class="n">difference</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">variation</span> <span class="o">=</span> <span class="n">difference</span><span class="o">*</span><span class="n">B</span>
    <span class="c"># A -&gt; B        </span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">variation</span> <span class="o">=</span> <span class="n">difference</span><span class="o">*</span><span class="n">A</span>
        
    <span class="c"># control the pace of change with alpha</span>
    <span class="n">variation</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">*</span><span class="n">variation</span>  
    
    <span class="c"># update the population    </span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">A</span> <span class="o">+</span> <span class="n">variation</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">B</span> <span class="o">-</span> <span class="n">variation</span>   
    
    <span class="c"># save the values to a list for plotting    </span>
    <span class="n">believersA</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="n">believersB</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    
    <span class="c"># advance time to next iteration</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, let's plot the results. First, we will import Python's plotting library, Matplotlib and use a predifined plotting style. Add these two lines at the beginning of your script:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>      <span class="c"># plotting library</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s">&#39;ggplot&#39;</span><span class="p">)</span>              <span class="c"># makes the graphs look pretty</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, let's plot! Plotting in Python is as easy as saying 'please plot this data for me'. Type these two lines at the very end of your code. We only want to plot the results once the simulation has finished so make sure this are not inside the while loop - that is, ensure this block of code is not indented. Run the code!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># plot the results    </span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">believersA</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">believersB</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[17]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>[&lt;matplotlib.lines.Line2D at 0x7f0deb281908&gt;]</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can see how over time one set of believers increases while the other decreases. This is not particularly surprising as the attractiveness Tb is higher than Ta. However, can you imagine a configuration where this is not enough to sway the population? Have a go at setting the variables to different initial values to see what combination can counteract this pattern.</p>
<ol>
<li>set the initial value of A to 5, 10, 25, 50, 75</li>
<li>set the MAX_TIME to 1000,</li>
<li>set the Ta and Tb to 1.0, 10.0, 0.1, 0.01, etc.,</li>
<li>set alpha to 0.01, and 1.0</li>
</ol>
<p>You can try all sorts of configurations to see how quickly the population shifts from one option to another or what are the minimum values of each variable that prevent it.</p>
<p>However, we can make the model more interesting if we allow the attractiveness of each option to change through time. To do so let's define a new function. Add the following line at the beginning of the while loop (remember indentation!).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre>    <span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span> <span class="o">=</span> <span class="n">attractiveness</span><span class="p">(</span><span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span><span class="p">)</span> 
</pre></div>

</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Ta and Tb will then be modified based on some dynamics we want to model. Let's define the 'attractiveness' function. We have already done it once for the 'payoff' function so it should be a piece of cake. At each time step we will slightly modify the attractiveness of each trait using a kernel K that we will define. This can be expressed as:</p>
\begin{equation*}
T_{A, t+1} = {T_A} + {K_a}
\end{equation*}<p></p>
\begin{equation*}
T_{B, t+1} = {T_B} + {K_b}
\end{equation*}<p></p>
<p>K can have several shapes such as:</p>
<ul>
<li>Fixed traits with $K_a = K_b = 0$</li>
<li>A gaussian stochastic process such as $K = N (0, 1)$</li>
<li>A combination (e.g., $K_a = N (0, 1)$ and $K_b = 1/3)$</li>
</ul>
<p>Let's start with a simple case scenario, such as a) $T_a$ will increase each step by a fixed $K_a$ and b) $K_b$ is equal to zero (so $T_b$ will be fixed over the whole simulation).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="k">def</span> <span class="nf">attractiveness</span><span class="p">(</span><span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span><span class="p">):</span>

    <span class="n">Ka</span> <span class="o">=</span> <span class="mf">0.01</span>  
    <span class="n">Kb</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="n">Ta</span> <span class="o">=</span> <span class="n">Ta</span> <span class="o">+</span> <span class="n">Ka</span>
    <span class="n">Tb</span> <span class="o">=</span> <span class="n">Tb</span> <span class="o">+</span> <span class="n">Kb</span>
    <span class="k">return</span> <span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First, we define the function and give it the input values.</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">attractiveness</span><span class="p">(</span><span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span><span class="p">):</span>
</pre></div>
<p>Then, we establish how much the attractiveness of each trait changes (i.e., define $K_a$ and $K_b$)</p>
<div class="highlight"><pre><span class="n">Ka</span> <span class="o">=</span> <span class="mf">0.01</span>         
<span class="n">Kb</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
<p>And plug them into the equations:</p>
<div class="highlight"><pre><span class="n">Ta</span> <span class="o">=</span> <span class="n">Ta</span> <span class="o">+</span> <span class="n">Ka</span>
<span class="n">Tb</span> <span class="o">=</span> <span class="n">Tb</span> <span class="o">+</span> <span class="n">Kb</span>
</pre></div>
<p>Finally, we return the new values:</p>
<div class="highlight"><pre><span class="k">return</span> <span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span>
</pre></div>
<p>This is how the function is defined. The main loop will now look like this:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="k">while</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="n">MAX_TIME</span><span class="p">:</span> 
    <span class="c"># update attractiveness</span>
    <span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span> <span class="o">=</span> <span class="n">attractiveness</span><span class="p">(</span><span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span><span class="p">)</span>
    <span class="c"># calculate the payoff for change of believers A and B in the current time step           </span>
    <span class="n">variationBA</span> <span class="o">=</span> <span class="n">payoff</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span><span class="p">)</span>      
    <span class="n">variationAB</span> <span class="o">=</span> <span class="n">payoff</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">Tb</span><span class="p">,</span> <span class="n">Ta</span><span class="p">)</span>     
    <span class="n">difference</span> <span class="o">=</span> <span class="n">variationBA</span> <span class="o">-</span> <span class="n">variationAB</span>
    
        <span class="c"># B -&gt; A   </span>
    <span class="k">if</span> <span class="n">difference</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">variation</span> <span class="o">=</span> <span class="n">difference</span><span class="o">*</span><span class="n">B</span>
    <span class="c"># A -&gt; B        </span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">variation</span> <span class="o">=</span> <span class="n">difference</span><span class="o">*</span><span class="n">A</span>
        
    <span class="c"># control the pace of change with alpha</span>
    <span class="n">variation</span> <span class="o">=</span> <span class="n">alpha</span><span class="o">*</span><span class="n">variation</span>  
    
    <span class="c"># update the population    </span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">A</span> <span class="o">+</span> <span class="n">variation</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">B</span> <span class="o">-</span> <span class="n">variation</span>   
    
    <span class="c"># save the values to a list for plotting    </span>
    <span class="n">believersA</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="n">believersB</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    
    <span class="c"># advance time to next iteration</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you plot this you will get a different result than the previous:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">believersA</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">believersB</span><span class="p">)</span> 
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[21]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>[&lt;matplotlib.lines.Line2D at 0x7f0deb1c12e8&gt;]</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="fig2.png" width="50%">

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Have a go at changing the values of $K_a$ and $K_b$ and see what happens. Can you see any equilibrium where both traits coexist?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are a number of functions we can use to dynamically change the 'attractiveness' of each trait. Try the following ones:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> <span class="c"># stick this line at the beginning of the script alongside other &#39;imports&#39;</span>


<span class="k">def</span> <span class="nf">attractiveness2</span><span class="p">(</span><span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span><span class="p">):</span>
    <span class="c"># temporal autocorrelation with stochasticity (normal distribution)</span>
    <span class="c"># we get 2 samples from a normal distribution N(0,1)</span>
    <span class="n">Ka</span><span class="p">,</span> <span class="n">Kb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="c"># compute the difference between Ks</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">Ka</span><span class="o">-</span><span class="n">Kb</span>
    <span class="c"># apply difference of Ks to attractiveness</span>
    <span class="n">Ta</span> <span class="o">+=</span> <span class="n">diff</span>
    <span class="n">Tb</span> <span class="o">-=</span> <span class="n">diff</span>
    <span class="k">return</span> <span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span>

<span class="k">def</span> <span class="nf">attractiveness3</span><span class="p">(</span><span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span><span class="p">):</span>
    <span class="c">#  anti-conformism dynamics (more population means less attractiveness)</span>
    
    <span class="c"># both values initialized at 0</span>
    <span class="n">Ka</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">Kb</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="c"># first we sample gamma with mean=last popSize of A times relevance    </span>
    <span class="n">diffPop</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">gamma</span><span class="p">(</span><span class="n">believersA</span><span class="p">[</span><span class="n">t</span><span class="p">])</span>
    <span class="c"># we sustract from this value the same computation for population B</span>
    <span class="n">diffPop</span> <span class="o">=</span> <span class="n">diffPop</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">gamma</span><span class="p">(</span><span class="n">believersB</span><span class="p">[</span><span class="n">t</span><span class="p">])</span>
    
    <span class="c"># if B is larger then we need to increase the attractiveness of A</span>
    <span class="k">if</span> <span class="n">diffPop</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">Ka</span> <span class="o">=</span> <span class="o">-</span><span class="n">diffPop</span>
    <span class="c"># else A is larger and we need to increase the attractiveness of B</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">Kb</span> <span class="o">=</span> <span class="n">diffPop</span>
    
    <span class="c"># change current values</span>
    <span class="n">Ta</span> <span class="o">=</span> <span class="n">Ta</span> <span class="o">+</span> <span class="n">Ka</span>
    <span class="n">Tb</span> <span class="o">=</span> <span class="n">Tb</span> <span class="o">+</span> <span class="n">Kb</span>
    
    <span class="k">return</span> <span class="n">Ta</span><span class="p">,</span> <span class="n">Tb</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Use the functions above (just change 'attractiveness' to, e.g., 'attractiveness2' in the main code) to see what happens when we add small dynamic variations to the process. What happens when the initial conditions are changed? What if we look at a much longer time scale?</p>
</div>
</div>
</div>
    </div>
  </div>
</body>
</html>
